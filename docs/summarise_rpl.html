---

title: Chapter 1 - summarise_rpl


keywords: fastai
sidebar: home_sidebar

summary: ": In this module, I explore the necessary elements to set up a `sc2reader`. I also review some of the data someone can extract using `sc2reader`."
description: ": In this module, I explore the necessary elements to set up a `sc2reader`. I also review some of the data someone can extract using `sc2reader`."
nb_path: "01_summarise_rpl.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 01_summarise_rpl.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Setup">Setup<a class="anchor-link" href="#Setup"> </a></h2><ol>
<li>Import <code>sc2reader</code> and libraries that you need in your project. For example, here, I use <code>pathlib.Path</code> to standardise the use of files and dirs.</li>
<li>Locate the directory for the replay files.</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="File-loading">File loading<a class="anchor-link" href="#File-loading"> </a></h3><p>One can load one replay at a time using the <code>sc2replays.load_replay(&lt;str_file_path&gt;)</code> method.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rps_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;./test_replays&quot;</span><span class="p">)</span>
<span class="n">game_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rps_path</span><span class="o">/</span><span class="s2">&quot;Jagannatha LE.SC2Replay&quot;</span><span class="p">)</span>
<span class="n">single_replay</span> <span class="o">=</span> <span class="n">sc2reader</span><span class="o">.</span><span class="n">load_replay</span><span class="p">(</span><span class="n">game_path</span><span class="p">)</span>
<span class="n">single_replay</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;sc2reader.resources.Replay at 0x1ecb6871340&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Alternatively, one can use the <code>sc2replays.load_replays(&lt;str_dir_path&gt;)</code> method, which returns a generator of replay objects.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rps_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;./test_replays&quot;</span><span class="p">)</span>
<span class="n">replays</span> <span class="o">=</span> <span class="n">sc2reader</span><span class="o">.</span><span class="n">load_replays</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">rps_path</span><span class="p">))</span>
<span class="n">replays</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;generator object SC2Factory.load_all at 0x000001ECB87AD970&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">replays</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>sc2reader.resources.Replay</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Objects">Objects<a class="anchor-link" href="#Objects"> </a></h2><h3 id="The-Replay-Object">The <code>Replay</code> Object<a class="anchor-link" href="#The-Replay-Object"> </a></h3><p>From a <code>Replay</code> object, one can access a variety of attributes that can be usefull as meta-data for a particular match.</p>
<p>Here, for example, I access most of the information about the replay calling different attributes of the <code>Replay</code> object.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;File path: </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;File hash: </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">filehash</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Version of the game in which the replay was played: &#39;</span><span class="p">,</span>
    <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">release_string</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Expansion (WoL: Wingd of Liberty, HotS: Heart of the Swarm, &#39;</span><span class="p">,</span>
    <span class="sa">f</span><span class="s1">&#39;LotV: Legacy of the Void): </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">expansion</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Game region: </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Game category: </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">category</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Game type: </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">game_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Map: </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">map_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Date start (datetime.datetime): </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">start_time</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Date end (datetime.datetime): </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">end_time</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Duration in MM.SS (minutes.seconds): </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">game_length</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Duration in MM.SS (minutes.seconds): &#39;</span><span class="p">,</span>
    <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">single_replay</span><span class="o">.</span><span class="n">length</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Duration in frames: </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">frames</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Frames per Second: </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">game_fps</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Players dict: </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">player</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Winner : </span><span class="si">{</span><span class="n">single_replay</span><span class="o">.</span><span class="n">winner</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>File path: test_replays\Jagannatha LE.SC2Replay
File hash: ffdcccf847aa496305a76be69e4d53c28422d308d59015558a149bd9363d0268
Version of the game in which the replay was played:  5.0.6.83830
Expansion (WoL: Wingd of Liberty, HotS: Heart of the Swarm,  LotV: Legacy of the Void): LotV
Game region: us
Game category: Ladder
Game type: 1v1
Map: Jagannatha LE
Date start (datetime.datetime): 2021-02-24 02:43:16
Date end (datetime.datetime): 2021-02-24 02:53:06
Duration in MM.SS (minutes.seconds): 09.50
Duration in MM.SS (minutes.seconds):  &lt;class &#39;int&#39;&gt;
Duration in frames: 13224
Frames per Second: 16.0
Players dict: {1: Player 1 - HDEspino (Protoss), 2: Player 2 - MxChrisxM (Terran)}
Winner : Team 2: Player 2 - MxChrisxM (Terran)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>{% include note.html content='More detailed information about the match can be extracted from the events that compose a match. One can list all the events from a match calling the <code>events</code> attribute of the <code>Replay</code>. However, due to the complexity of this information I will cover it in more detail in later modules (see the <code>01_hand_event</code> notebook for more information).' %}</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="The-Participant-Object">The <code>Participant</code> Object<a class="anchor-link" href="#The-Participant-Object"> </a></h3><p>A lot of the information one could need from a <code>Replay</code> to build a summary could be drawn directly from its attributes. However, to summarise who where the players in the match, what races they played with and their results, I need to access the attributes of the match's <code>Participants</code>.</p>
<p>Note that, as explained in <a href="https://sc2reader.readthedocs.io/en/latest/articles/conceptsinsc2reader.html">sc2reader documentation</a>:</p>
<p>All entities in a replay fall into one of two overlapping buckets:</p>
<ul>
<li><strong>User</strong>: is a human entity. Only users have <em>game and message events</em>.</li>
<li><strong>Player</strong>: is an entity that actively plays in the game. Only players have <em>tracker events</em>.</li>
</ul>
<p>As such, one can summarise the entities encountered in replays as follows:</p>
<ul>
<li>A <strong>Participant</strong> is a Player and a User</li>
<li>An <strong>Observer</strong> is a User and not a Player</li>
<li>A <strong>Computer</strong> is a Player and not a User</li>
</ul>
<p>With this in mind, here I access the match participans' information as follows:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">player_one</span> <span class="o">=</span> <span class="n">single_replay</span><span class="o">.</span><span class="n">player</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">player_two</span> <span class="o">=</span> <span class="n">single_replay</span><span class="o">.</span><span class="n">player</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="nb">type</span><span class="p">(</span><span class="n">player_one</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>sc2reader.objects.Participant</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This way I locate the each <code>Participant</code> within a variable, which allows me to extract meaningful information from these objects, as I show bellow.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;User Name: </span><span class="si">{</span><span class="n">player_one</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Race played in match: </span><span class="si">{</span><span class="n">player_one</span><span class="o">.</span><span class="n">play_race</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Match result: </span><span class="si">{</span><span class="n">player_one</span><span class="o">.</span><span class="n">result</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Player ID: </span><span class="si">{</span><span class="n">player_one</span><span class="o">.</span><span class="n">pid</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>User Name: HDEspino
Race played in match: Protoss
Match result: Loss
Player ID: 1
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;User Name: </span><span class="si">{</span><span class="n">player_two</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Race played in match: </span><span class="si">{</span><span class="n">player_two</span><span class="o">.</span><span class="n">play_race</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Match result: </span><span class="si">{</span><span class="n">player_two</span><span class="o">.</span><span class="n">result</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Player ID: </span><span class="si">{</span><span class="n">player_two</span><span class="o">.</span><span class="n">pid</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>User Name: MxChrisxM
Race played in match: Terran
Match result: Win
Player ID: 2
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>{% include note.html content='One can list all the events from a match associated with each player separately via the events attribute of each <code>Participant</code> (see the <code>01_hand_event</code> notebook for more information).' %}</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Functions">Functions<a class="anchor-link" href="#Functions"> </a></h2><p>Now that I know what data I can extract directly from the <code>Replay</code> and the <code>Participant</code> objects, I will compose a function that will summarise a 1v1 match. I will use frozen <code>dataclass</code> as the primary data structure where I store this summary to enforce immutability.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Data-structures">Data structures<a class="anchor-link" href="#Data-structures"> </a></h3><p>First, I define a couple of frozen datacasses that can store the data I will extract from the <code>Replay</code>.</p>
<p>The <a href="/sc_training/summarise_rpl.html#Player_data"><code>Player_data</code></a> class will store a sumary of each player's basic information.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Player_data" class="doc_header"><code>class</code> <code>Player_data</code><a href="https://github.com/HDavidEspinosa/sc_training/tree/master/sc_training/summarise_rpl.py#L19" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Player_data</code>(<strong><code>player_number</code></strong>:<code>int</code>, <strong><code>username</code></strong>:<code>str</code>, <strong><code>race</code></strong>:<code>str</code>, <strong><code>result</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Immutable dataclass that contains Information that describes a
player's attributes in a match.</p>
<p><em>Attributes:</em></p>

<pre><code>- player_number (int):
    Player number in the match. In a 1v1, match there would be a
    Player 1 and 2.
- username (str):
    The player's user name.
- race (str):
    The game race (Protoss, Terran, Zerg) with which the player
    played this match.
- result (str):
    Variable descriving whether the player was the matches winner
    ('Win') or loser ('Loss').</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This data class can store the information of each player as shown here.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">p_one</span> <span class="o">=</span> <span class="n">Player_data</span><span class="p">(</span>
    <span class="n">single_replay</span><span class="o">.</span><span class="n">player</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> 
    <span class="n">single_replay</span><span class="o">.</span><span class="n">player</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
    <span class="n">single_replay</span><span class="o">.</span><span class="n">player</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">play_race</span><span class="p">,</span>
    <span class="n">single_replay</span><span class="o">.</span><span class="n">player</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">result</span>
<span class="p">)</span>
<span class="n">astuple</span><span class="p">(</span><span class="n">p_one</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(1, &#39;HDEspino&#39;, &#39;Protoss&#39;, &#39;Loss&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I have also implemented the <code>__str__()</code> function of the class to offer a user friendly representation of the <a href="/sc_training/summarise_rpl.html#Player_data"><code>Player_data</code></a> objects.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">p_one</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Player Number:          1
User Name:       HDEspino
Race:             Protoss
Result:              Loss

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Meanwhile, the <a href="/sc_training/summarise_rpl.html#Replay_data"><code>Replay_data</code></a> class stores the information on the match. This includes a list of <a href="/sc_training/summarise_rpl.html#Player_data"><code>Player_data</code></a> instances that consolidate the information of the match's players in a single location.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Replay_data" class="doc_header"><code>class</code> <code>Replay_data</code><a href="https://github.com/HDavidEspinosa/sc_training/tree/master/sc_training/summarise_rpl.py#L52" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Replay_data</code>(<strong><code>replay_name</code></strong>:<code>str</code>, <strong><code>replay_id</code></strong>:<code>str</code>, <strong><code>date_time</code></strong>:<code>datetime</code>, <strong><code>game_length</code></strong>:<code>int</code>, <strong><code>match_type</code></strong>:<code>str</code>, <strong><code>game_release</code></strong>:<code>str</code>, <strong><code>map_name</code></strong>:<code>str</code>, <strong><code>category</code></strong>:<code>str</code>, <strong><code>winner</code></strong>:<code>str</code>, <strong><code>players</code></strong>:<code>list</code>[<a href="/sc_training/summarise_rpl.html#Player_data"><code>Player_data</code></a>])</p>
</blockquote>
<p>Immutable dataclass that contains information summarising a
match's main attributes.</p>
<p><em>Attributes:</em></p>

<pre><code>- replay_name (str):
    Absolute path of where the Replay was stored when uploaded.
- replay_id (str):
    Name of the SC2Replay file.
- date_time (datetime):
    Date and time when the match was played and recorded.
- game_length (int):
    Length of the match in seconds.
- match_type (str):
    Descrives the team configuration of the match (eg '1v1', '2v2').
- game_release (str):
    Version and patch number for the game release where the match
    played.
- map_name (str):
    Name of the match's map.
- category (str):
    Descrives if the match was 'Ladder' or other type of match.
- winner (str):
    User name of the match's winner
- players (list):
    Summarised information of the match's players (see Player_data
    class).</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Helper-Functions">Helper Functions<a class="anchor-link" href="#Helper-Functions"> </a></h3><p>To illustrate how this dataclass works, let me define a helper function (<a href="/sc_training/summarise_rpl.html#get_players"><code>get_players</code></a>) that I will use to iterate through the match's list of players (extracted as a <code>dict</code> calling on the replay's <code>player</code> attribute), converting each one into a <a href="/sc_training/summarise_rpl.html#Player_data"><code>Player_data</code></a> instance and returning a new list with this summaries.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_players" class="doc_header"><code>get_players</code><a href="https://github.com/HDavidEspinosa/sc_training/tree/master/sc_training/summarise_rpl.py#L111" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_players</code>(<strong><code>player_dict</code></strong>:<code>Dict</code>[<code>Any</code>, <code>Any</code>])</p>
</blockquote>
<p>Extracts the players' data from a Participant Object, into a
Player_data instance.</p>
<p><em>Args:</em></p>

<pre><code>- player_dict (Dict[int, sc2reader.objects.Participant]):
    Dictionary of the players in the match.

</code></pre>
<p><em>Returns:</em></p>

<pre><code>- List[Player_data]:
    List of the match's players, each player contains a summary of
    their match data.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>With this function and the attributes explored above I can store a summary of the matches meta-data in a <a href="/sc_training/summarise_rpl.html#Replay_data"><code>Replay_data</code></a> instance like this:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">Replay_data</span><span class="p">(</span>
        <span class="n">replay_name</span><span class="o">=</span> <span class="n">single_replay</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span>
        <span class="n">replay_id</span><span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">single_replay</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">date_time</span><span class="o">=</span> <span class="n">single_replay</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
        <span class="n">game_length</span><span class="o">=</span> <span class="n">single_replay</span><span class="o">.</span><span class="n">length</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span>
        <span class="n">match_type</span><span class="o">=</span> <span class="n">single_replay</span><span class="o">.</span><span class="n">game_type</span><span class="p">,</span>
        <span class="n">game_release</span><span class="o">=</span> <span class="n">single_replay</span><span class="o">.</span><span class="n">release_string</span><span class="p">,</span>
        <span class="n">map_name</span><span class="o">=</span> <span class="n">single_replay</span><span class="o">.</span><span class="n">map_name</span><span class="p">,</span>
        <span class="n">category</span><span class="o">=</span> <span class="n">single_replay</span><span class="o">.</span><span class="n">category</span><span class="p">,</span>
        <span class="n">winner</span><span class="o">=</span> <span class="n">single_replay</span><span class="o">.</span><span class="n">winner</span><span class="p">,</span>
        <span class="n">players</span><span class="o">=</span> <span class="n">get_players</span><span class="p">(</span><span class="n">single_replay</span><span class="o">.</span><span class="n">player</span><span class="p">)</span> <span class="c1"># note the use of the</span>
                                                   <span class="c1"># helper function here</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>File path:                   test_replays\Jagannatha LE.SC2Replay 
File name:                   Jagannatha LE.SC2Replay 
Date (datetime.datetime):    2021-02-24 02:53:06 
Duration (seconds):          590 
Game type:                   1v1 
Game release:                5.0.6.83830 
Map:                         Jagannatha LE 
Game category:               Ladder 
winner:                      Team 2: Player 2 - MxChrisxM (Terran) 
players:                     [(1, &#39;HDEspino&#39;, &#39;Protoss&#39;, &#39;Loss&#39;), (2, &#39;MxChrisxM&#39;, &#39;Terran&#39;, &#39;Win&#39;)] 

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Again, I have implemented the class' <code>__str__()</code> method to provide a user friendly printy of the class.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>File path:                   test_replays\Jagannatha LE.SC2Replay 
File name:                   Jagannatha LE.SC2Replay 
Date (datetime.datetime):    2021-02-24 02:53:06 
Duration (seconds):          590 
Game type:                   1v1 
Game release:                5.0.6.83830 
Map:                         Jagannatha LE 
Game category:               Ladder 
winner:                      Team 2: Player 2 - MxChrisxM (Terran) 
players:                     [(1, &#39;HDEspino&#39;, &#39;Protoss&#39;, &#39;Loss&#39;), (2, &#39;MxChrisxM&#39;, &#39;Terran&#39;, &#39;Win&#39;)] 

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Exported-Functions">Exported Functions<a class="anchor-link" href="#Exported-Functions"> </a></h3><p>Having defined these data structures, I can define a simple function that receives a <code>Replay</code> and returns a replay summary as a <a href="/sc_training/summarise_rpl.html#Replay_data"><code>Replay_data</code></a> instance.</p>
<p>Here is the documentation for that function.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_replay_info" class="doc_header"><code>get_replay_info</code><a href="https://github.com/HDavidEspinosa/sc_training/tree/master/sc_training/summarise_rpl.py#L130" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_replay_info</code>(<strong><code>replay</code></strong>:<code>Replay</code>)</p>
</blockquote>
<p>Extracts a summary of a match's general information into a Replay_data
dataclass instance.</p>
<p><em>Args:</em></p>

<pre><code>- replay (sc2reader.resources.Replay):
    Replay object to be analysed.

</code></pre>
<p><em>Returns:</em></p>

<pre><code>- Replay_data
    Summary of a matches main descriptive information.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Example-use-of-the-get_replay_info()-function">Example use of the <code>get_replay_info()</code> function<a class="anchor-link" href="#Example-use-of-the-get_replay_info()-function"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">get_replay_info</span><span class="p">(</span><span class="n">single_replay</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>File path:                   test_replays\Jagannatha LE.SC2Replay 
File name:                   Jagannatha LE.SC2Replay 
Date (datetime.datetime):    2021-02-24 02:53:06 
Duration (seconds):          590 
Game type:                   1v1 
Game release:                5.0.6.83830 
Map:                         Jagannatha LE 
Game category:               Ladder 
winner:                      Team 2: Player 2 - MxChrisxM (Terran) 
players:                     [(1, &#39;HDEspino&#39;, &#39;Protoss&#39;, &#39;Loss&#39;), (2, &#39;MxChrisxM&#39;, &#39;Terran&#39;, &#39;Win&#39;)] 

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

